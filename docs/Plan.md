# **Предусловия старта тестирования сервиса "Путешествие дня"**
1. Убедиться, что порты 8080, 9999, 3306 5432 свободны
2. Запустить настроенный ``docker`` командой ``docker-compose up``
3. Запустить SUT [``aqa-shop.jar``](https://github.com/UniverseQA/Diploma/blob/main/artifacts/aqa-shop.jar) командой ``java -jar aqa-shop.jar``  
3.1. В случае если вы запускаете ``docker`` на виртуальной машине по адресу ``185.119.57.47`` - для запуска сервиса с указанием пути к базе данных можно использовать следующие команды:  
для **mysql:**  
``java "-Dspring.datasource.url=jdbc:mysql://185.119.57.47:3306/db_mysql" -jar artifacts/aqa-shop.jar``  
для **postgresql:**  
``java "-Dspring.datasource.url=jdbc:postgresql://185.119.57.47:5432/db_postgresql" -jar artifacts/aqa-shop.jar``  
3.2. В случае если вы запускаете ``docker``у себя на локальной машине - для запуска сервиса с указанием пути к базе данных можно использовать следующие команды:  
для **mysql:**  
``java "-Dspring.datasource.url=jdbc:mysql://localhost:3306/db_mysql" -jar artifacts/aqa-shop.jar``  
для **postgresql:**  
``java "-Dspring.datasource.url=jdbc:postgresql://localhost:5432/db_postgresql" -jar artifacts/aqa-shop.jar``
4. Перейти по [ссылке](http://localhost:8080)
5. Запуск тестов можно осуществлять с указанием пути к базе данных в командной строке.  
5.1. В случае если вы запускаете ``docker`` на виртуальной машине по адресу ``187.119.57.47`` - для запуска тестов с указанием пути к базе данных можно использовать следующие команды:  
для **mysql**  
``./gradlew clean test "-Ddb.url=jdbc:mysql://185.119.57.47:3306/db_mysql"``  
для **postgresql:**  
``./gradlew clean test "-Ddb.url=jdbc:postgresql://185.119.57.47:5432/db_postgresql"``  
5.2. В случае если вы запускаете ``docker``у себя на локальной машине - для запуска тестов с указанием пути к базе данных можно использовать следующие команды:  
для **mysql:**  
``./gradlew clean test "-Ddb.url=jdbc:mysql://localhost:3306/db_mysql"``  
для **postgresql**  
``./gradlew clean test "-Ddb.url=jdbc:postgresql://localhost:5432/db_postgresql"``

# Валидные данные:
### Поле "Номер карты"
В базу данных заведены два номера карты:  
4444 4444 4444 4441 - со статусом **"Одобрена"**  
4444 4444 4444 4442 - со статусом **"Отклонена"**
### Поле "Месяц"
Цифры от 1 до 12 в формате дд - **_например:_** 01, 06, 11
### Поле "Год"
Цифры от 23 до 28 (при условии, что 23 - это текущий год) в формате гг - **_например:_** 24, 27, 28
### Поле "Владелец"
Фамилия и имя на латинице в верхнем регистре **_например:_** JOHN KRASINSKI
### Поле CVC/CVV
Цифры в количестве 3 единиц **_например:_** 666


# **Перечень автоматизируемых сценариев:**
## **_Позитивные сценарии_:**
1. **Покупка билета дебетовой картой:**  
Выбрать раздел "Купить"  
Ввести валидные значения в поля для заполнения  
Нажать на кнопку "Продолжить"   
**Ожидаемый результат** - уведомление об успешной оплате билета. В базе данных появилась запись.
2. **Покупка билета в кредит:**  
Выбрать раздел "Купить в кредит"  
Ввести валидные значения в поля для заполнения  
Нажать на кнопку "Продолжить"   
**Ожидаемый результат** - уведомление об успешной оплате билета банком-кредитором. В базе данных появилась запись.

## **_Негативные сценарии_ (для разделов "Купить"/"Купить в кредит"):**
3. **Покупка билета "отклонённой" дебетовой картой:**  
Выбрать раздел "Купить"  
В поле "Номер карты" ввести данные карты со статусом "отклонена"  
Остальные поля заполнить валидными данными  
Нажать на кнопку "Продолжить"  
**Ожидаемый результат** - уведомление об отказе банка
4. **Покупка билета "отклонённой" картой в кредит:**    
Выбрать раздел "Купить в кредит"  
В поле "Номер карты" ввести данные карты со статусом "отклонена"  
Остальные поля заполнить валидными данными  
Нажать на кнопку "Продолжить"  
**Ожидаемый результат** - уведомление об отказе банка

#### Поле "Номер карты"  
5. Ввести невалидные значения в поле - заполнить менее 16 цифр, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить".   
**_Например:_** _4444 4444 4444 444_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Неверный формат"**
6. Ввести невалидные значения в поле - ввести шестнадцать нулей, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**_Например:_** _0000 0000 0000 0000_   
**Ожидаемый результат** всплывающее уведомление об отказе банка в совершении операции
7. Ввести номер несуществующей карты(отсутствующей в базе данных), остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**_Например:_** _1234 5678 9012 3456_     
**Ожидаемый результат** всплывающее уведомление об отказе банка в совершении операции
8. Оставить поле пустым, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"    
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Поле обязательно для заполнения"**

#### Поле "Месяц" 
9. Ввести невалидные значения в поле - ввести цифры в диапозоне от 13 до 99 включительно, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**_Например:_** _13, 55, 98_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Неверно указан срок действия карты"**
10. Ввести невалидные значения в поле - ввести ноль, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**_Например:_** _0_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Неверный формат"**
11. Ввести невалидные значения в поле - ввести два нуля, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**_Например:_** _00_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Неверно указан срок действия карты"**
12. Ввести невалидные значения в поле - ввести цифры от 1 до 9, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**_Например:_** _1, 5, 8_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Неверный формат"**  
13. Ввести невалидные значения в поле - ввести цифру 01 _(при условии, что в поле "Месяц" была введена цифра менее текущей даты исполнения сценария, в то время как введённая цифра в поле "Год" соответствует текущей дате исполнения сценария)_ , остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"   
**_Например:_** _Год: 23, Месяц: 01 (текущая дата февраль 2023 года)_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Неверно указан срок действия карты"**  
14. Оставить поле пустым, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Поле обязательно для заполнения"**

#### Поле "Год"
15. Ввести невалидные значения в поле - ввести цифры от 0 до 9, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**_Например:_** _0, 4, 9_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Неверный формат"**  
16. Ввести невалидные значения в поле - ввести цифры от 01 до 22, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**_Например:_** _04, 17, 22_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Истёк срок действия карты"**   
17. Ввести невалидные значения в поле - ввести два нуля, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**_Например:_** _00_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Истёк срок действия карты"**
18. Ввести невалидные значения в поле - ввести цифры от 29 до 99(при условии, что на момент написания сценария текущая дата февраль 2023), остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"     
**_Например:_** _29, 32, 96_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Неверно указан срок действия карты"**
19. Оставить поле пустым, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Поле обязательно для заполнения"**

#### Поле "Владелец"  
20. Ввести невалидные значения в поле - ввести любые цифры, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**_Например:_** _84951727044_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Неверный формат"** 
21. Ввести невалидные значения в поле - ввести специальные символы в начале-середине-или в конце поля, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**_Например:_** _!"№;%:?*()<>{}/|\_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Неверный формат"**
22. Ввести невалидные значения в поле - ввести данные на кирилице, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**_Например:_** _Леонид Якубович_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Неверный формат"**
23. Ввести невалидные значения в поле - ввести данные на латинице в нижнем регистре, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**_Например:_** _michael scott_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Неверный формат"**
24. Ввести невалидные значения в поле - ввести данные на латинице с заглавными буквами имени и фамилии, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"     
**_Например:_** _Dwight Schrute_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение под полем **"Неверный формат"**
25. Ввести невалидные значения в поле - ввести латинские символы в верхнем регистре более 85 единиц, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"      
**_Например:_** _ÇEKOSLOVAKYALILASTIRAMADIKLARIMIZDANMISINIZ DONAUDAMPFSCHIFFAHRTSELEKTRIZITAETENHAUPTBETRIEBSW_  
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение **о превышенном количестве введённых символов**
26. Оставить поле пустым, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"   
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение **"Поле обязательно для заполнения"**

#### Поле "CVC/CVV"
27. Ввести невалидные значения в поле - ввести три нуля, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**_Например:_** _000_    
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение **"Неверный формат"**
28. Ввести невалидные значения в поле - ввести менее трёх цифр, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"  
**_Например:_** _30, 5_     
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение **"Неверный формат"**
29. Оставить поле пустым, остальные поля заполнить валидными данными и нажать на кнопку "Продолжить"      
**Ожидаемый результат** - поле окрашивается в красный цвет и появляется предупреждение **"Поле обязательно для заполнения"**

# **Перечень используемых инструментов с обоснованием выбора:**

**Java** - изучаемый язык программирования  
**IntelliJ IDEA** - удобная среда разработки с широким набором инструментов и плагинов  
**Gradle** - удобная система сборки проектов с полезными завимостями  
**Lombok** - библиотека для сокращения кода в классах  
**Allure** - популярный и удобный инструмент построения отчётов автотестов  
**Faker** - библиотека для генерации данных  
**Selenide** - удобный фреймворк для автоматизированного тестирования на основе Selenium  
**JUnit Jupiter** - удобная модель программирования(аннотации, классы, методы)  
**GitHub** - удобный веб-сервис для хранения и редактирования кода  
**PuTTY** - клиент для удалённого доступа к виртуальной машине  

# **Перечень и описание возможных рисков при автоматизации:**

1) Прекращение/ограничение доступа к виртуальной машине
2) Некорректно или недостаточно понятые ограничения полей и других элементов сервиса по причине отсутствия документации
3) Изменения в коде сервиса
4) Нарушение работы с СУБД(действительно ли сервис поддерживает две СУБД, как будет работать при обращении к двум СУБД одновременно и тд.)
5) Неработоспособность или некорректная работа подготовленного симулятора банковских сервисов

# **Интервальная оценка с учётом рисков в часах:**

### 120 часов

# **План сдачи работ: когда будут готовы автотесты, результаты их прогона:**

Готовность тестов - **до 08.02.2023 г.**  
Результаты их прогона - **до 11.02.2023 г.**  
Сдача на проверку и исправление ошибок - **до 18.02.2023 г.**
